"use strict";(self.webpackChunksamurai=self.webpackChunksamurai||[]).push([[98],{1278:function(e,t,s){s.d(t,{Gr:function(){return p},II:function(){return f},gx:function(){return d}});var n=s(1413),r=s(5987),i=(s(2791),s(6139)),a=s(6835),o=s(184),l=["input"],u=["input"],c=function(e){var t=e.meta,s=e.children,n=t.error&&t.touched;return(0,o.jsxs)("div",{className:n?a.Z.formControlError:"",children:[(0,o.jsx)("div",{children:s}),(0,o.jsx)("div",{children:n&&(0,o.jsx)("span",{children:t.error})})]})},d=function(e){var t=e.input,s=(0,r.Z)(e,l);return(0,o.jsx)(c,(0,n.Z)((0,n.Z)({},e),{},{children:(0,o.jsx)("textarea",(0,n.Z)((0,n.Z)({},t),s))}))},f=function(e){var t=e.input,s=(0,r.Z)(e,u);return(0,o.jsx)(c,(0,n.Z)((0,n.Z)({},e),{},{children:(0,o.jsx)("input",(0,n.Z)((0,n.Z)({},t),s))}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;return(0,o.jsxs)("div",{className:u,children:[(0,o.jsx)(i.Z,(0,n.Z)((0,n.Z)({component:r,name:t,placeholder:e,validate:s},a),{},{className:c})),l]})}},7250:function(e,t,s){s.d(t,{K5:function(){return r},yH:function(){return i},ze:function(){return n}});var n=100,r=5,i=15},1058:function(e,t,s){s.d(t,{C:function(){return n},D:function(){return r}});var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},7286:function(e,t,s){s.r(t),s.d(t,{default:function(){return he}});var n=s(1413),r=s(5671),i=s(3144),a=s(136),o=s(2882),l=s(2791),u=s(2835),c=s(364),d=s(4880),f=s(7781),p=s(656),h=s(7250),m=s(6527),v=s(1278),_=s(1058),x=s(704),j="myPosts_myPostsSection__sgwJ5",g="myPosts_myPostsTitle__3xBRA",N="myPosts_newPostSection__4gcap",y="myPosts_newPostCreateField__FbLps",b="myPosts_addPostButton__DpfRv",I=s(184),S=(0,_.D)(h.ze),k=(0,x.Z)({form:"add-new-profile-post"})((function(e){var t=e.handleSubmit;return(0,I.jsxs)("form",{onSubmit:t,children:[(0,v.Gr)("Write your post","newPostText",[_.C,S],v.gx,{},"","",y),(0,I.jsx)("div",{children:(0,I.jsx)(m.z,{className:b,type:"submit",children:"Add post"})})]})})),C=s(4353),P="post_post__bn7zH",Z="post_avatar__adKX4",w="post_textBlock__ydhRP",A="post_userMessage__7CHkI",M="post_likesWrapper__rwpSU",O="post_likesCount__DM-ue",F=function(e){var t=e.message,s=e.likesCount,n=e.userAvatar;return(0,I.jsxs)("div",{className:P,children:[(0,I.jsx)("div",{className:Z,children:(0,I.jsx)("img",{alt:"user avatar",src:n||C})}),(0,I.jsxs)("div",{className:w,children:[(0,I.jsx)("p",{className:A,children:t}),(0,I.jsx)("div",{className:M,children:(0,I.jsxs)("span",{children:["likes: ",(0,I.jsx)("span",{className:O,children:s})]})})]})]})},E=(0,l.memo)((function(e){var t=e.posts.map((function(t){var s=t.likesCount,n=t.message;return(0,I.jsx)(F,{likesCount:s,message:n,userAvatar:e.userAvatar},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"")}())}));return e.isOwner?(0,I.jsxs)("div",{className:j,children:[(0,I.jsx)("h3",{className:g,children:"My posts"}),(0,I.jsx)("div",{className:N,children:(0,I.jsx)(k,{onSubmit:function(t){e.addPost(t.newPostText)}})}),(0,I.jsx)("div",{children:t})]}):null})),D=(0,c.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e((0,p.q2)(t))}}}))(E),U=s(885),G=s.p+"static/media/profileBackground.80219fa19e256a7ce65b.jpg",T=s(8297),z="profileInfo_backgroundImage__xtVV1",B="profileInfo_button__KdepC",J="profileInfo_userInfoSection__yRFtq",V="profileInfo_editModeContainer__PdKUV",H="profileInfo_editFormContainer__Hv9IL",L="profileInfo_editModeContacts__hwmGI",R="profileInfo_editModeInput__jmd-+",q="profileInfo_userDescription__xtoyn",K="profileInfo_userName__hv6yg",W="profileInfo_userInfoText__sfAZ1",X="profileInfo_flexContainer__h2C-2",$="profileInfo_contactsSection__9CDOs",Y="profileInfo_contactText__sWkhl",Q="profileInfo_userAvatarSection__HtdXN",ee="profileInfo_userAvatar__E1b8e",te="profileInfo_inputFileButtonContainer__duNY0",se="profileInfo_inputFile__5Ngpe",ne="profileInfo_statusContainer__jMeiW",re=function(e){var t=e.contactTitle,s=e.contactValue;return(0,I.jsx)("div",{className:Y,children:"".concat(t,": ").concat(s)})},ie=function(e){var t=e.profile,s=e.isOwner,n=e.enableEditMode;return(0,I.jsxs)("div",{className:q,children:[s&&(0,I.jsx)("div",{children:(0,I.jsx)(m.z,{className:B,onClick:n,children:"Edit info"})}),(0,I.jsx)("div",{className:K,children:t.fullName?t.fullName:"information is absent"}),(0,I.jsxs)("div",{className:W,children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJobDescription&&(0,I.jsxs)("div",{className:W,children:["Skills:",t.lookingForAJobDescription]}),t.aboutMe&&(0,I.jsxs)("div",{className:W,children:["About me:",t.aboutMe]}),!Object.keys(t.contacts).map((function(e){return t.contacts[e]})).every((function(e){return null===e}))&&(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:$,children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return t.contacts[e]?(0,I.jsx)(re,{contactTitle:e,contactValue:t.contacts[e]},e):null}))]})]})},ae=s(6835),oe=(0,x.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.profile,n=e.error;return(0,I.jsxs)("form",{className:H,onSubmit:t,children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)(m.z,{className:B,type:"submit",children:"Save info"})}),n&&(0,I.jsx)("div",{className:ae.Z.formSummaryError,children:n}),(0,I.jsxs)("div",{className:W,children:[(0,I.jsx)("span",{className:W,children:"Full name: "}),(0,v.Gr)("Full name","fullName",[],v.II,{},"","",R)]}),(0,I.jsxs)("div",{className:X,children:[(0,I.jsx)("span",{className:W,children:"Looking for a job: "}),(0,I.jsx)("div",{className:R,children:(0,v.Gr)("","lookingForAJob",[],v.II,{type:"checkbox"},"","","")})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:W,children:"Skills: "}),(0,v.Gr)("Skills","lookingForAJobDescription",[],v.gx,{},"","",R)]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:W,children:"About me: "}),(0,v.Gr)("About me","aboutMe",[],v.gx,{},"","",R)]})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:L,children:"Contacts"}),Object.keys(s.contacts).map((function(e){return(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:W,children:e}),(0,I.jsx)("span",{children:": "}),(0,v.Gr)(e,"contacts.".concat(e),[],v.II,{},"","",R)]},e)}))]})]})})),le="profileStatus_status__FL0S8",ue="profileStatus_editStatus__GZf3y",ce=function(e){(0,a.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editMode:!1,status:e.props.status,isOwner:e.props.isOwner},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e.deactivateEditMode=function(){var t=e.props.updateStatus,s=e.state.status;e.setState({editMode:!1}),t(s)},e.activateEditMode=function(){e.state.isOwner&&e.setState({editMode:!0})},e}return(0,i.Z)(s,[{key:"componentDidUpdate",value:function(e){var t=this.props.status;e.status!==t&&this.setState({status:t})}},{key:"render",value:function(){var e=this.props.status,t=this.state,s=t.editMode,n=t.status;return(0,I.jsx)("div",{children:s?(0,I.jsx)("div",{children:(0,I.jsx)("input",{autoFocus:!0,className:ue,onBlur:this.deactivateEditMode,onChange:this.onStatusChange,value:n})}):(0,I.jsx)("div",{children:(0,I.jsx)("span",{className:le,onClick:this.activateEditMode,role:"button",tabIndex:0,children:e||"Status is not set"})})})}}]),s}(l.Component),de=function(e){var t=e.profile,s=e.isOwner,n=e.status,r=e.updateStatus,i=e.savePhoto,a=e.saveProfile,o=(0,l.useState)(!1),u=(0,U.Z)(o,2),c=u[0],d=u[1];if(!t)return(0,I.jsx)(T.p,{});return(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)("img",{alt:"Background",className:z,src:G})}),(0,I.jsxs)("div",{className:J,children:[(0,I.jsxs)("div",{className:Q,children:[(0,I.jsx)("img",{alt:t.fullName+" user avatar",className:ee,src:t.photos.large||C}),s&&(0,I.jsxs)("div",{className:te,children:[(0,I.jsx)("input",{className:se,id:"file",name:"file",onChange:function(e){var t;1===(null===(t=e.target.files)||void 0===t?void 0:t.length)&&i(e.target.files[0])},type:"file"}),(0,I.jsx)("label",{htmlFor:"file",children:"Change avatar"})]})]}),(0,I.jsxs)("div",{className:V,children:[(0,I.jsx)("div",{className:ne,children:(0,I.jsx)(ce,{isOwner:s,status:n,updateStatus:r})}),c?(0,I.jsx)(oe,{initialValues:t,onSubmit:function(e){a(e).then((function(){d(!1)}))},profile:t}):(0,I.jsx)(ie,{enableEditMode:function(){return d(!0)},isOwner:s,profile:t})]})]})]})},fe=function(e){var t=e.profile,s=e.isOwner,n=e.status,r=e.updateStatus,i=e.savePhoto,a=e.saveProfile;return(0,I.jsxs)("div",{children:[(0,I.jsx)(de,{isOwner:s,profile:t,savePhoto:i,saveProfile:a,status:n,updateStatus:r}),(0,I.jsx)(D,{isOwner:s,userAvatar:null===t||void 0===t?void 0:t.photos.small})]})},pe=function(e){(0,a.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e,t=this.props,s=t.authorizedUserId,n=t.getStatus,r=t.getUserProfile,i=t.history,a=t.match;a.params.userId&&(e=Number(a.params.userId)),e||(e=s)||i.push("/".concat(u.m.LOGIN)),"number"===typeof e&&(r(e),n(e))}},{key:"render",value:function(){var e=this.props,t=e.currentUser,s=e.match,r=e.profile,i=e.savePhoto,a=e.saveProfile,o=e.status,l=e.updateStatus;return(0,I.jsx)(fe,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:void 0===s.params.userId||+s.params.userId===t,profile:r,savePhoto:i,saveProfile:a,status:o,updateStatus:l}))}}]),s}(l.Component),he=(0,f.qC)((0,c.$j)((function(e){return{profile:e.profilePage.profile,isOwner:e.profilePage.isOwner,currentUser:e.auth.userId,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:p.et,getStatus:p.lR,updateStatus:p.Nf,savePhoto:p.Ju,saveProfile:p.Ii}),d.EN)(pe)},6835:function(e,t){t.Z={formControlError:"formsControls_formControlError__H4ZXC",formSummaryError:"formsControls_formSummaryError__+1fih"}},885:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,a,o=[],l=!0,u=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&null!=s.return&&(a=s.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=98.3c5d3911.chunk.js.map